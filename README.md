<p align="center">
  <a href="https://github.com/JamesIves/github-sponsors-readme-action">
    <img width="200px" src="https://github.com/JamesIves/github-sponsors-readme-action/raw/dev/.github/assets/icon.png">
  </a>
</p>

<h1 align="center">
  ‚ú® GitHub Sponsors Readme Action ‚ú®
</h1>

<p align="center">
  <a href="https://github.com/JamesIves/github-sponsors-readme-action/actions">
    <img src="https://github.com/JamesIves/github-sponsors-readme-action/workflows/unit-tests/badge.svg" alt="Unit test status badge">
  </a>
  
  <a href="https://github.com/JamesIves/github-sponsors-readme-action/actions">
    <img src="https://github.com/JamesIves/github-sponsors-readme-action/workflows/integration-tests/badge.svg" alt="Integration test status badge">
  </a>
  
  <a href="https://codecov.io/gh/JamesIves/github-sponsors-readme-action/branch/dev">
    <img src="https://codecov.io/gh/JamesIves/github-sponsors-readme-action/branch/dev/graph/badge.svg" alt="Code coverage status badge">
  </a>
  
  <a href="https://github.com/JamesIves/github-sponsors-readme-action/releases">
    <img src="https://img.shields.io/github/v/release/JamesIves/github-sponsors-readme-action.svg?logo=github" alt="Release version badge">
  </a>
</p>

<p align="center">
  This <a href="https://github.com/features/actions">GitHub Action</a> will automatically add your <a href="https://github.com/sponsors">GitHub Sponsors</a> to your README. It can be configured in multiple ways allowing you to display and breakdown your sponsors by price tier with fallbacks. It also includes templating support so you can display your sponsors how you'd like.
</p>
<p align="center">
 Maintenance of this project is made possible by all the <a href="https://github.com/JamesIves/github-pages-deploy-action/graphs/contributors">contributors</a> and <a href="https://github.com/sponsors/JamesIves">sponsors</a>. If you'd like to sponsor this project and have your avatar or company logo appear below <a href="https://github.com/sponsors/JamesIves">click here</a>. üíñ
</p>

<p align="center">
<!-- real-premium --><a href="https://github.com/github"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;9919?v&#x3D;4" width="80px" alt="github" /></a>&nbsp;&nbsp;<a href="https://github.com/annegentle"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;501981?u&#x3D;155ca47d6829300d17a5454f0839f341424ecf8d&amp;v&#x3D;4" width="80px" alt="annegentle" /></a>&nbsp;&nbsp;<a href="https://github.com/tonjohn"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;7477471?u&#x3D;95de84ff7e5bca043d742be6025ed3d4c593b4f5&amp;v&#x3D;4" width="80px" alt="tonjohn" /></a>&nbsp;&nbsp;<!-- real-premium -->
</p>

<p align="center">
<!-- real-sponsors --><a href="https://github.com/Chooksta69"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;64383803?v&#x3D;4" width="50px" alt="Chooksta69" /></a>&nbsp;&nbsp;<a href="https://github.com/MattWillFlood"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;56543497?u&#x3D;1be6fe938a7cdd414907bf0d2598e378783873f3&amp;v&#x3D;4" width="50px" alt="MattWillFlood" /></a>&nbsp;&nbsp;<a href="https://github.com/jonathan-milan-pollock"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;29420046?u&#x3D;4abd4069b4fef966d4ce3f6fbff4f14f2bc6080f&amp;v&#x3D;4" width="50px" alt="jonathan-milan-pollock" /></a>&nbsp;&nbsp;<a href="https://github.com/raoulvdberge"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;10358424?u&#x3D;5f1f63170dc2151a80948d205e39759e9e902ab6&amp;v&#x3D;4" width="50px" alt="raoulvdberge" /></a>&nbsp;&nbsp;<a href="https://github.com/robjtede"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;3316789?u&#x3D;5b6d5b45b7a2755584d2c57ecabf56f3eb292e21&amp;v&#x3D;4" width="50px" alt="robjtede" /></a>&nbsp;&nbsp;<a href="https://github.com/hadley"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;4196?u&#x3D;381fe2cce7ecc86993a19168bcf6638e9805326a&amp;v&#x3D;4" width="50px" alt="hadley" /></a>&nbsp;&nbsp;<a href="https://github.com/kevinchalet"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;6998306?u&#x3D;71c40a231984c198d230974e6536b1aea5caf756&amp;v&#x3D;4" width="50px" alt="kevinchalet" /></a>&nbsp;&nbsp;<a href="https://github.com/Yousazoe"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;58163275?u&#x3D;53e8c48f203d62424b0497a84851d9546328e518&amp;v&#x3D;4" width="50px" alt="Yousazoe" /></a>&nbsp;&nbsp;<a href="https://github.com/planetoftheweb"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;216426?u&#x3D;f1a819a7d5f75b8034c122cbdba7bdcb38d0e1c9&amp;v&#x3D;4" width="50px" alt="planetoftheweb" /></a>&nbsp;&nbsp;<a href="https://github.com/melton1968"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;976548?v&#x3D;4" width="50px" alt="melton1968" /></a>&nbsp;&nbsp;<a href="https://github.com/szepeviktor"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;952007?u&#x3D;18bbc00cedf197bc543f479b4e39f09c0260ca3d&amp;v&#x3D;4" width="50px" alt="szepeviktor" /></a>&nbsp;&nbsp;<a href="https://github.com/sckott"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;577668?u&#x3D;c54eb1ce08ff22365e094559a109a12437bdca40&amp;v&#x3D;4" width="50px" alt="sckott" /></a>&nbsp;&nbsp;<a href="https://github.com/provinzkraut"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;25355197?u&#x3D;634fd238d93f44c6f522dda72068fc82941564c4&amp;v&#x3D;4" width="50px" alt="provinzkraut" /></a>&nbsp;&nbsp;<a href="https://github.com/electrovir"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;1205860?u&#x3D;61c2513bc24ecc2a909817adc701746b94fed939&amp;v&#x3D;4" width="50px" alt="electrovir" /></a>&nbsp;&nbsp;<a href="https://github.com/Griefed"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;44273438?u&#x3D;b44cb19075c1a93904507a69067fc55bc66360a9&amp;v&#x3D;4" width="50px" alt="Griefed" /></a>&nbsp;&nbsp;<a href="https://github.com/MontezumaIves"><img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;78580739?u&#x3D;b65aecfacc32ed08463bd50dae61d8a048f618ec&amp;v&#x3D;4" width="50px" alt="MontezumaIves" /></a>&nbsp;&nbsp;<a href="https://github.com/"><img src="https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;JamesIves&#x2F;github-sponsors-readme-action&#x2F;dev&#x2F;.github&#x2F;assets&#x2F;placeholder.png" width="50px" alt="" /></a>&nbsp;&nbsp;<a href="https://github.com/"><img src="https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;JamesIves&#x2F;github-sponsors-readme-action&#x2F;dev&#x2F;.github&#x2F;assets&#x2F;placeholder.png" width="50px" alt="" /></a>&nbsp;&nbsp;<!-- real-sponsors -->
</p>

## Getting Started ‚úàÔ∏è

You can include the action in your workflow to trigger on any event that [GitHub Actions supports](https://help.github.com/en/articles/events-that-trigger-workflows).

> [!IMPORTANT]
> You'll need to provide the action with a **Personal Access Token (PAT)** scoped to `read:user` and `read:org`.
>
> Additionally, this action only applies the template within the workspace. You will need to combine it with a deployment action in order to commit it to your project. You can see a full example of this below.

```yml
name: Generate Sponsors README
on:
  workflow_dispatch:
  schedule:
    - cron: 30 15 * * 0-6
permissions:
  contents: write
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v2

      - name: Generate Sponsors üíñ
        uses: JamesIves/github-sponsors-readme-action@v1
        with:
          token: ${{ secrets.PAT }}
          file: 'README.md'

      # ‚ö†Ô∏è Note: You can use any deployment step here to automatically push the README
      # changes back to your branch.
      - name: Deploy to GitHub Pages üöÄ
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          branch: main
          folder: '.'
```

You'll also need to the following `<!-- sponsors --><!-- sponsors -->` in your `.md` file so the action knows where to place the data.

```md
# Awesome Project

Go you!

## Sponsors

These are our really cool sponsors!

<!-- sponsors --><!-- sponsors -->
```

> [!TIP]
> Looking for a more guided walkthrough? [Check out the following article for more details on how to set everything up in your project](https://jamesiv.es/blog/github/actions/2023/06/30/add-your-github-sponsors-to-your-project-readme).

#### Install as a Node Module üì¶

If you'd like to use the functionality provided by this action in your own action you can either [create a composite action](https://docs.github.com/en/actions/creating-actions/creating-a-composite-action), or you can install it using [yarn](https://yarnpkg.com/) or [npm](https://www.npmjs.com/get-npm) by running the following commands. It's available on both the [npm](https://www.npmjs.com/package/@jamesives/github-sponsors-readme-action) and [GitHub registry](https://github.com/JamesIves/github-sponsors-readme-action/packages/229982).

```
yarn add @jamesives/github-sponsors-readme-action
```

```
npm install @jamesives/github-sponsors-readme-action
```

It can then be imported into your project like so.

```javascript
import run from '@jamesives/github-sponsors-readme-action'

run({
  token: process.env.GITHUB_TOKEN
})
```

Calling the functions directly will require you to pass in an object containing the variables found in the [configuration section](https://github.com/JamesIves/github-sponsors-readme-action#configuration-).

## Configuration üìÅ

The `with` portion of the workflow **must** be configured before the action will work. You can add these in the `with` section found in the examples above. Any `secrets` must be referenced using the bracket syntax and stored in the GitHub repository's `Settings/Secrets` menu. You can learn more about setting environment variables with GitHub actions [here](https://help.github.com/en/actions/configuring-and-managing-workflows/creating-and-storing-encrypted-secrets#creating-encrypted-secrets).

#### Required Setup

The following options must be configured.

| Key     | Value Information                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Type   | Required |
| ------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ | -------- |
| `token` | You must provide the action with a Personal Access Token (PAT) with the `read:user` and `read:org` permission scope and store it in the `secrets / with` menu **as a secret**. This should be generated from the account or organization that receives sponsorship, and depending on your use case you may need to provide additional scopes. [Learn more about creating and using encrypted secrets here](https://docs.github.com/en/actions/reference/encrypted-secrets). | `with` | **Yes**  |
| `file`  | This should point to the file that you're generating, for example `README.md` or `path/to/CREDITS.md`. Defaults to `README.md` if no value is provided.                                                                                                                                                                                                                                                                                                                     | `with` | **Yes**  |

#### Optional Choices

| Key               | Value Information                                                                                                                                                                                                                                                 | Type   | Required |
| ----------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ | -------- |
| `organization`    | If you're displaying sponsorship information as or for an organization you should toggle this option to `true`. You also need to provide the action with an `read:org` and `read:user` scoped PAT. **Note**: The PAT must belong to an owner of the organization. | `with` | **No**   |
| `minimum`         | Using this input you can set the minimum sponsorship threshold. For example setting this to `500` will only display sponsors who give of `$5 USD` and more. By default the action will display all of your sponsors.                                              | `with` | **No**   |
| `maximum`         | Using this input you can set the maximum sponsorship threshold. For example setting this to `500` will only display sponsors who give of `$5 USD` and less. By default the action will display all of your sponsors.                                              | `with` | **No**   |
| `marker`          | This allows you to modify the marker comment that is placed in your file. By default this is set to sponsors - `<!-- sponsors --> <!-- sponsors -->`, if you set this to `gold` for example you can place `<!-- gold --> <!-- gold -->` in your file.             | `with` | **No**   |
| `fallback`        | Allows you to specify a fallback if you have no sponsors. By default nothing is displayed.                                                                                                                                                                        | `with` | **No**   |
| `template`        | Allows you to modify the default template. Please refer to the `template` section of this README for more information.                                                                                                                                            | `with` | **No**   |
| `active-only`     | If set to `false`, inactive sponsors will be displayed. This can be useful if you want to display all sponsors, regardless of their status. By default this is set to `true`.                                                                                     | `with` | **No**   |
| `include-private` | If set to `true`, private sponsors will be displayed in the list, however any identifying information will be redacted. This can be useful if you want to display all sponsors, regardless of their privacy settings.                                             | `with` | **No**   |

#### Deployment Status

The action will export a step output as `sponsorship-status` that you can use in your workflow to determine if the task was successful or not. You can find an explanation of each status type below.

| Status    | Description                                                                                             |
| --------- | ------------------------------------------------------------------------------------------------------- |
| `success` | The `success` status indicates that the action was able to successfully generate the README.            |
| `failed`  | The `failed` status indicates that the action encountered an error while trying to generate the README. |
| `skipped` | The `skipped` status indicates that the action could not locate the markers in your .md file.           |
| `running` | The `running` status indicates that the action is actively working.                                     |

---

### Modifying the Template üîß

You can modify the template that gets generated in your file by using the `template` input. This input allows you to leverage mustache templating to modify what is displayed. The following values are available.

| Status       | Description                                                                                                                                                              |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `name`       | The users full name. This can sometimes be `null` if the user hasn't set one. This can be accessed using `{{ name }}`                                                    |
| `login`      | The users login, this can be accessed using `{{ login }}`                                                                                                                |
| `url`        | The users GitHub profile url, this can be accessed using `{{ url }}`.                                                                                                    |
| `avatarUrl`  | The users avatar url, this can be accessed using `{{ avatarUrl }}`.                                                                                                      |
| `websiteUrl` | The users website url. This can sometimes be `null` if the user hasn't set one, if so this field will fall back to `url`. This can be accessed using `{{ websiteUrl }}`. |

You're able to use markdown or GitHub approved basic HTML. The default template can be found [here](./src/constants.ts#L38).

<details><summary>You can view a full example of this here.</summary>
<p>

```yml
name: Generate Sponsors README
on:
  push:
    branches:
      - main
permissions:
  contents: write
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v2

      - name: Generate Sponsors üíñ
        uses: JamesIves/github-sponsors-readme-action@v1
        with:
          token: ${{ secrets.PAT }}
          file: 'README.md'
          template: '* [{{ name }}]({{ url }}) - {{ login }}'

      - name: Deploy to GitHub Pages üöÄ
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          branch: main
          folder: '.'
```

```md
# Awesome Project

Go you!

## Sponsors

These are our really cool sponsors!

<!-- sponsors --><!-- sponsors -->
```

</p>
</details>

---

### Separating by Sponsorship Tier ‚ú®

If you'd like to highlight certain users who contribute to a specific sponsorship tier you can do so using a combination of the `minimum`, `maximum` and `marker` inputs. The `minimum / maximum` inputs equal their dollar contribution in cents.

<details><summary>You can view a full example of this here.</summary>
<p>

```yml
name: Generate Sponsors README
on:
  push:
    branches:
      - main
permissions:
  contents: write
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v2

      - name: Generate Sponsors üíñ
        uses: JamesIves/github-sponsors-readme-action@v1
        with:
          token: ${{ secrets.PAT }}
          file: 'README.md'
          minimum: 500
          maximum: 999
          marker: 'silver'

      - name: Generate Sponsors üíñ
        uses: JamesIves/github-sponsors-readme-action@v1
        with:
          token: ${{ secrets.PAT }}
          file: 'README.md'
          minimum: 1000
          marker: 'gold'

      - name: Deploy to GitHub Pages üöÄ
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          branch: main
          folder: '.'
```

```md
# Awesome Project

Go you!

## Gold Sponsors

<!-- gold -->
<!-- gold -->

## Silver Sponsors

<!-- silver -->
<!-- silver -->
```

</p>
</details>
